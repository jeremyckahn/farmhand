# Introduction

## 1. High-Level Overview

**Farmhand** is a unique market simulation game with a charming farming aesthetic. At its core, it is a "buy low, sell high" stock market simulator where the commodities are agricultural products. Players engage in farming activities to produce "stock," which they then trade on a dynamic, fluctuating market. The game is designed to be a compelling economic challenge, wrapped in the accessible and relaxing visuals of a farming game.

## 2. Game Concept

The core concept of Farmhand is to master a simulated economy. Players don't just grow crops; they play the market. The central challenge is to anticipate price shifts, decide when to invest in production (planting), and, most importantly, when to sell for maximum profit. Farming and crafting are the means to an end: generating assets to trade. Success is measured not just by the size of the farm, but by the player's wealth and their ability to outsmart the market.

## 3. Genre

*   **Primary Genre:** Economic Simulation
*   **Secondary Genres:** Trading Game, Resource Management

## 4. Target Audience

Farmhand is aimed at players who enjoy strategic thinking and economic challenges, presented in an approachable format.

*   Players who enjoy "buy low, sell high" mechanics and market dynamics.
*   Fans of simulation and tycoon games who are looking for a new twist on the genre.
*   Strategic players who enjoy optimizing systems and finding the most profitable path.
*   The farming aesthetic makes it accessible to a broader audience that might be intimidated by traditional stock market simulators.

## 5. What Makes it Fun? (The Core Fantasy)

The fun in Farmhand is centered on the thrill of playing the market and the satisfaction of seeing a well-timed trade pay off.

*   **The Thrill of the Trade:** The core loop is not about farming, but about wealth generation. The excitement comes from watching the market, predicting trends, and making the decision to sell at the perfect moment.
*   **Strategic Depth:** The game is a puzzle of resource allocation and timing. Should you invest in cheap, fast-growing crops for a quick return, or expensive, slow-growing crops for a larger payoff? Should you sell now, or hold your inventory in the hope of a price surge? These are the questions that drive the gameplay.
*   **Beating the System:** The ultimate fantasy is to master the game's economy. Players feel a sense of accomplishment when they successfully predict a price event, corner the market on a particular commodity, or build a vast fortune through shrewd trading.
*   **Tangible Results:** Unlike abstract numbers in a traditional stock market game, the player's "stock" is tangibleâ€”it's a field of ripe tomatoes or a cellar full of aged wine. This provides a unique and satisfying connection to the economic simulation.
*   **Social Economics:** In multiplayer, the market becomes a shared battleground of wits. Players must not only account for the game's random fluctuations but also the actions of other players, adding a layer of competitive and cooperative economic gameplay.
# Core Gameplay Loop

The gameplay in Farmhand is a cycle of strategic economic decisions, with farming as the primary means of executing those decisions. The loop is focused on the "buy low, sell high" principle.

## 1. Analyze the Market (The Strategy Phase)

The first and most important step in the loop is to analyze the market.

*   **Check Prices:** The player reviews the current market prices for all commodities.
*   **Identify Opportunities:** The player looks for goods with low prices (a good time to "buy" or produce) and goods with high prices (a good time to sell).
*   **Anticipate Events:** The player is informed of any upcoming price events, which can drastically change the value of certain goods. This information is crucial for planning.

## 2. Invest & Produce (The "Buy Low" Phase)

Based on their market analysis, the player invests their capital in producing commodities they believe will be profitable.

*   **Purchase Seeds:** The player buys seeds for crops that are either currently undervalued or are expected to rise in price. This is the equivalent of buying a low-cost stock.
*   **Manage Production:** The player engages in the farming activities required to grow their "stock": tilling, planting, watering, and protecting their crops. This is the "work" required to mature their investment.

## 3. Hold & Wait (The "Holding" Phase)

Once an investment is made, the player must wait for it to mature and for the market conditions to be favorable.

*   **Nurture Assets:** The player continues to care for their crops and animals.
*   **Monitor the Market:** The player keeps a close eye on the market, waiting for the optimal moment to sell. This phase is a test of patience and risk management.

## 4. Sell High (The "Sell High" Phase)

This is the payoff. The player sells their commodities when the price is high to maximize their return on investment.

*   **Timing the Sale:** The player must decide on the best day to sell. Do they sell now for a guaranteed profit, or risk waiting another day in the hopes of an even higher price?
*   **Liquidate Assets:** The player sells their harvested crops and other goods, converting their tangible assets back into cash.

## 5. Re-invest & Grow (The "Growth" Phase)

The profits from successful sales are used to expand the player's economic engine.

*   **Increase Production Capacity:** The player can purchase more land, allowing them to produce more commodities at once.
*   **Improve Efficiency:** The player can upgrade their tools and infrastructure (like sprinklers) to reduce the labor cost of producing goods, increasing their profit margins.
*   **Diversify Portfolio:** The player can unlock new types of crops and animals, allowing them to diversify their "portfolio" and mitigate risk.

This loop repeats, with the player using their growing knowledge of the market and their expanding farm to generate ever-increasing profits.
# Game Mechanics

This section details the various systems and mechanics that make up the gameplay of Farmhand. The primary mechanic is the economy, with all other systems serving as a means to interact with it.

## 1. The Economy: Your Battlefield

The economy is the core of the game. It is a living system that players must learn to master.

### 1.1. The Market

The market is where all buying and selling takes place. It is the central hub of the game's economic activity.

*   **Commodities:** Every sellable item in the game is treated as a commodity with a fluctuating price.
*   **Price Fluctuations:** Prices change daily based on a randomized algorithm. The key to success is buying the means of production when prices are low and selling the resulting goods when prices are high.
*   **Price Events:** The game will announce special price events at the start of a day. These are significant, temporary shifts in the value of a commodity (e.g., "Tomato prices are skyrocketing!"). These events are major opportunities for profit or loss.
*   **Multiplayer Market Dynamics:** In multiplayer, the market is a shared entity. When one player sells a large volume of a commodity, it drives the price down for everyone. This creates a competitive and collaborative economic environment where players must react to each other's strategies.

### 1.2. The Shop: Investing in Production

The shop is not just a place to buy things; it's where you make your initial investments.

*   **Buying "Stock":** Purchasing seeds and animals is the primary way to invest in future production. The cost of these items is fixed, but the potential return is variable, depending on when you sell the resulting products.
*   **Capital Expenditures:** Purchasing tools, upgrades, and land are capital expenditures designed to increase the efficiency and scale of your production engine.

### 1.3. Loans: High-Risk Capital

Players can take out loans for a quick influx of cash.

*   **Leverage:** Loans allow players to leverage their capital, enabling them to make larger investments than they could otherwise afford.
*   **Interest:** Loans come with daily interest payments, adding a layer of risk. A poorly timed investment made with a loan can lead to significant debt.

## 2. Farming: Your Production Engine

Farming is the primary method for producing the commodities you will trade on the market. It is a system to be optimized for maximum efficiency and profit.

*   **Crops as Assets:** Each crop is an asset with a cost to produce (seed price, time, and labor) and a variable sale price. Players must choose which crops to invest in based on their analysis of the market.
*   **The Field as a Factory:** The farm is the player's factory floor. Expanding the farm and optimizing its layout is key to scaling up production.
*   **Tools for Efficiency:** Upgrading tools is not just about making farming easier; it's about increasing the return on investment. An upgraded scythe harvests more from a single plot, directly increasing the yield of an investment. An upgraded watering can reduces the time-cost of production.

## 3. Animal Husbandry: Long-Term Investments

Animals are another class of asset that players can invest in.

*   **Cows as Bonds:** Compared to crops, cows are a more stable, long-term investment. They have a higher initial cost but provide a steady stream of daily revenue (milk).
*   **Improving Asset Value:** The value of a cow's output can be increased through care (hugging) and proper feeding. Breeding allows for the creation of "blue-chip" assets that produce higher-quality goods.

## 4. Crafting: Creating High-Value Goods

Crafting is the process of turning basic commodities into more advanced, higher-value products. This is analogous to creating complex financial instruments.

*   **The Workshop & Cellar:** These are the player's R&D labs and finishing factories.
*   **Value-Added Products:** A bottle of wine is worth more than the grapes and yeast used to make it. Cooking recipes turn basic crops into more valuable dishes. Crafting allows players to access higher tiers of the market.
*   **Risk and Reward:** Crafting requires a larger upfront investment of time and resources. However, the potential payoff from selling artisanal goods is much higher than selling raw commodities.

## 5. Progression: Your Economic Reputation

The progression system reflects the player's growth as a market tycoon.

*   **Experience as Market Clout:** Gaining experience and leveling up unlocks access to new markets (new seeds and recipes) and more advanced production techniques (tool upgrades).
*   **Achievements as Trophies:** Achievements mark significant economic milestones, celebrating the player's successes as a trader.
# Game Assets

This section provides an overview of the art and audio assets used in Farmhand.

## 1. Art Style

Farmhand features a charming and colorful pixel art style. The art is created using Piskel, a free online editor for animated sprites and pixel art. The style is simple and clean, which makes the game easy to read and understand, even on small screens.

## 2. Sprites

The game uses a variety of sprites to represent the different objects and characters in the world.

*   **Crops:** Each crop has a set of sprites to represent its different stages of growth, from a small sprout to a fully mature plant.
*   **Items:** Every item in the game has a unique sprite that is displayed in the inventory, shop, and other UI elements. This includes raw materials, crafted goods, tools, and special items.
*   **Animals:** The cows have a set of sprites for different poses and actions, such as walking, eating, and sleeping. There are also different color variations for different breeds of cows.
*   **Characters:** While the player is represented by a first-person perspective, future updates may include player avatars and non-player characters (NPCs) with their own unique sprites.
*   **Environmental Details:** The game world is decorated with various environmental sprites, such as trees, rocks, and flowers, to make it feel more alive.

## 3. User Interface (UI)

The UI is designed to be clean, intuitive, and mobile-friendly. It uses a combination of custom-designed UI elements and components from the Material-UI library.

*   **Icons:** The UI makes extensive use of icons to represent actions, items, and information in a clear and concise way.
*   **Windows and Menus:** The game's menus and windows have a consistent design, with a simple, flat aesthetic and a clear visual hierarchy.
*   **Backgrounds:** Different screens and areas of the game have unique background images to give them a distinct look and feel.

## 4. Audio (Sound Effects and Music)

(Note: This section is based on the assumption of a complete GDD. The actual implementation of audio in the codebase has not been fully explored.)

Audio plays a crucial role in creating an immersive and satisfying gameplay experience.

*   **Sound Effects (SFX):** The game will feature a variety of sound effects to provide feedback for player actions, such as:
    *   The "swoosh" of a scythe.
    *   The "glug" of a watering can.
    *   The "cha-ching" of a sale.
    *   The "moo" of a cow.
*   **Background Music (BGM):** Each area of the game will have its own unique background music to set the mood:
    *   A relaxing, pastoral theme for the farm.
    *   An upbeat, bustling theme for the shop.
    *   A mysterious, ambient theme for the mine.
*   **UI Sounds:** The UI will have a set of sounds for common interactions, such as button clicks, notifications, and achievements.
# Technical Details

This section provides an overview of the technical architecture and technologies used to build Farmhand.

## 1. Architecture

Farmhand is a Progressive Web App (PWA) built with modern web technologies. This allows it to be played in a web browser or installed on a device for offline play. The architecture is designed to be modular, scalable, and maintainable.

*   **Component-Based UI:** The user interface is built using a component-based architecture with React. This allows for a high degree of code reuse and a clear separation of concerns.
*   **Decoupled Game Logic:** The core game logic is completely decoupled from the UI. It is implemented as a set of pure functions (reducers) that take the current game state and an action, and return a new game state. This makes the game logic easy to test and reason about.
*   **Centralized State Management:** The entire state of the game is stored in a single, immutable object. This makes it easy to track changes to the state over time and simplifies the process of saving and loading the game.

## 2. Technologies Used

*   **Frontend Framework:** [React](https://reactjs.org/) - A popular JavaScript library for building user interfaces.
*   **Build Tool:** [Vite](https://vitejs.dev/) - A fast and modern build tool for web development.
*   **UI Components:** [Material-UI](https://mui.com/) - A library of pre-built React components that implement Google's Material Design.
*   **Multiplayer:** [WebRTC](https://webrtc.org/) (via the [Trystero](https://github.com/dmotz/trystero) library) - A technology that enables real-time communication between web browsers, used for the game's peer-to-peer multiplayer.
*   **Offline Storage:** [localForage](https://github.com/localForage/localForage) - A library that provides a simple, asynchronous API for offline data storage in web browsers.
*   **Native Application:** [Electron](https://www.electronjs.org/) - A framework for building cross-platform desktop applications with web technologies.
*   **Art and Animation:** [Piskel](https://www.piskelapp.com/) - A free online editor for animated sprites and pixel art.

## 3. State Management

The management of the game state is a critical part of Farmhand's architecture.

*   **The State Object:** The entire game state is contained within a single JavaScript object, referred to as `farmhand.state`. This object includes everything from the player's inventory and money to the state of every plot on their farm.
*   **Immutability:** The state object is treated as immutable. This means that it is never modified directly. Instead, whenever a change needs to be made, a new state object is created with the updated values. This approach prevents a wide range of bugs and makes the game's behavior more predictable.
*   **Reducers:** All changes to the game state are handled by a set of functions called "reducers." Each reducer is responsible for a specific type of action (e.g., `harvestPlot`, `purchaseItem`). It takes the current state and an action payload as input, and returns a new state object.
*   **Versioning and Migration:** The `farmhand.state` object has a version number associated with it. This allows the game to handle changes to the data structure between updates. When a new version of the game is released with a different state structure, a migration function is used to automatically update the player's save data to the new format.
